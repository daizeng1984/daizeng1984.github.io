(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{"8hLB":function(e,a,t){"use strict";var n=t("q1tI"),s=t.n(n),c=(t("Wbzz"),t("Bl7J"));a.a=function(e){return s.a.createElement(c.a,Object.assign({},e,{icon:"post"}))}},oaFV:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return b})),t.d(a,"default",(function(){return o}));var n=t("zLVn"),s=(t("q1tI"),t("7ljp")),c=t("8hLB"),b={},r={_frontmatter:b},i=c.a;function o(e){var a=e.components,t=Object(n.a)(e,["components"]);return Object(s.b)(i,Object.assign({},r,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("p",null,"Is Rust the next gen C/C++? let's get some readings and keep notes..."),Object(s.b)("h1",null,"Why? Rust?"),Object(s.b)("blockquote",null,Object(s.b)("p",{parentName:"blockquote"},"Performanceüêæ and Securityüêü, I want both!")),Object(s.b)("p",null,Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://benchmarksgame-team.pages.debian.net/benchmarksgame/which-programs-are-fastest.html"}),"Perform like C++"),' yet "secure" like a script lang. Talks like a cool script lang yet powerful enough to go deep down to system level. '),Object(s.b)("p",null,"As a more secure and yet efficient lang, Rust recently catches my eyes and ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://hub.packtpub.com/rust-as-a-game-programming-language-is-it-any-good/"}),"some people")," even believe it can replace (at least somewhat) the long-live C++ for game dev. Although lang itself is not the one to blame for messy/buggy C++ game code (e.g. Cyberpunk 2077), I still wish there is a cleaner/stricter language to branch from C++ (instead of splicing tons of historical/back-compatible features) so that developer doesn't need to create their own code standard, wheels, memory model etc. Junior developers under C++ tends to depise such rules which potentially leading to hard-to-find bugs like dangling pointer, memory tampering, multithread resource sharing with unclear ownership etc.. Rust uses stricter compiling check (historically strict ownership) to make sure a more reliable run time code, which means like a good human language teacher who requires you to elaborate your every sentence (and it might slow you down at first). A lot of system level cli app I used are written by Rust. After my reading, I believe knowing rust can help foster lots of good C++ habits that C++ junior won't have when first diving to C++ project. Learning Rust could be the fastest way to know how to be a better C++ coder. Besides, like other mainstream langs, Rust has friendly pkg manager üëç(cargo and crates.io). It's definitely another level to old C/C++ pkg eco-sys. Enthusiastic people even consider using it to build safer ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://doc.redox-os.org/book/ch01-02-what-is-redox.html"}),"OS"),"! In web world, Rust is also modern and mutually first class to webassembly, if you believe wasm is the future web."),Object(s.b)("img",{style:{width:"100%",maxWidth:"30rem"},alt:"Rust Fast",src:"https://benchmarksgame-team.pages.debian.net/benchmarksgame/download/fastest.svg"}),Object(s.b)("p",null,"In my pov, Rust does the right balance between safety and efficiency. C++ can do that but requires trained and discipline programmers. The question will be down to whether extra 2% perf gain worth the trade-off. Besides how about pkg manager? Does C++ give you that by default?"),Object(s.b)("img",{src:"https://media.nature.com/lw800/magazine-assets/d41586-020-03382-2/d41586-020-03382-2_18629102.png",alt:"Rust Popular"}),Object(s.b)("h1",null,"Cheatsheet for C++ Programmer"),Object(s.b)("p",null,"I'm a C++ programmer, so this is for myself to revisit when forget:"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"& is stack ptr but with safer read/write + null guarantee (reference_wrapper) and can be unsafely rawed to C++ ptr"),Object(s.b)("li",{parentName:"ul"},"borrowing means better referencing (respect ownership). passing value == giveup ownership unless you has trait copy/movable (e.g. primitive type, &T, struct); passing ref only allows multiple immutable or 1 mutable"),Object(s.b)("li",{parentName:"ul"},"copy is never deep (== c++ default assignment) unless you explicitly do clone"),Object(s.b)("li",{parentName:"ul"},"str == C++ char[] + better boundary (than 0); String == C++ std::string; ","[T;usize]"," == C++ T[]; Vec<T",">"," == C++ std::vector;"),Object(s.b)("li",{parentName:"ul"},"&str is the common arguments for String and str, and similar for other pairs like [] & Vec"),Object(s.b)("li",{parentName:"ul"},"const == C++ macro or const; static == C++ static"),Object(s.b)("li",{parentName:"ul"},"smart pointers is referece with ownership more like C++. see ",Object(s.b)("a",Object.assign({parentName:"li"},{href:"#smart_pointers"}),"table from RIA books")),Object(s.b)("li",{parentName:"ul"},"smart pointers trait DeRef/Drop"),Object(s.b)("li",{parentName:"ul"},"homework or before you consider using it as an interview lang: implement simple link list using Rust (ref ",Object(s.b)("a",Object.assign({parentName:"li"},{href:"https://rust-unofficial.github.io/too-many-lists/second-option.html"}),"https://rust-unofficial.github.io/too-many-lists/second-option.html"),")")),Object(s.b)("h1",null,Object(s.b)("a",Object.assign({parentName:"h1"},{href:"https://doc.rust-lang.org/book/title-page.html"}),"The Official Book")," (‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê)"),Object(s.b)("p",null,"Nice example based learning see ",Object(s.b)("a",Object.assign({parentName:"p"},{href:"https://doc.rust-lang.org/rust-by-example/"}),"here")),Object(s.b)("h2",null,"Data Types"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i8"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i16"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i64"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i128"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"isize"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"u8"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"u16"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"u32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"u64"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"u128"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"usize"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"f32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"f64"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"char")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"unicode ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"4")," bytes",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),'//b"..." is bytes[u8] and only ascii "..." is str type'),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"bool"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," empty tuple\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"struct")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token type-definition class-name"}),"Tensor"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//tuple"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"struct")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token type-definition class-name"}),"Point"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\nx",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," y",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"enum")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token type-definition class-name"}),"PointType")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"OneDimension"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// default 0 but can be =1"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"TwoDimension"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Ojb"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"ThreeDimension"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//enum"),"\n\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"["),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"T"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")," length",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"]")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//array"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"const")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token constant"}),"COMPILE_TIME_VALUE")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"10"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"static")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token constant"}),"STATIC_VALUE")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"str")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token lifetime-annotation symbol"}),"'Unsafe"),"'",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"// unsafe if you mut it"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"let")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"mut")," mutable ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),";")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//can change but you can let mutable = mutable; to unmut it üòÑ")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Immutable variable vs const: const is compile time (c++ const) while immutable is for runtime. You can mut immutable vars."),Object(s.b)("li",{parentName:"ul"},"You can shadow immutable vars but shadowing different type cannot happens"),Object(s.b)("li",{parentName:"ul"},"arch type like isize and usize is depending on pc arch used"),Object(s.b)("li",{parentName:"ul"},"overflow handling is suggested as wrapping",Object(s.b)("em",{parentName:"li"},"* (mod) , checked"),Object(s.b)("em",{parentName:"li"}," (-> None if overflow) overflowing_")," (->(val, boolean)) and saturating_",Object(s.b)("em",{parentName:"li"}," (clamp at min/max) (")," can be add/substract etc.) See rust makes junior aware these issues instead of hiding like c/c++!!!"),Object(s.b)("li",{parentName:"ul"},"char is 4byte"),Object(s.b)("li",{parentName:"ul"},"tuple let a = (1,2.0,'a') and a.0 is 1 and destructing like let (x, y, z) = a"),Object(s.b)("li",{parentName:"ul"},"arrays is familiar c++/c flavor, compile time length on stack let a = ","[3; 5]",". Out of index is protected (no invalid memory access) by rust in run time.")),Object(s.b)("h2",null,"Functions"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"snake_case convention. "),Object(s.b)("li",{parentName:"ul"},"statement doesn't return: let x = let y = 5 or let x = y = 5 is invalid. See rust kill these brain teaser statementüëç.")),Object(s.b)("h2",null,"Flow"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"if condition must be bool. Because a lot of implicit bool in other lang brings a lot of monsters. as expression let x = if con {1} else {2}; is valid as long as type is the same"),Object(s.b)("li",{parentName:"ul"},"loop with break as expression let x = loop { ... break 2 };"),Object(s.b)("li",{parentName:"ul"},"for n in nums.iter() or for n in (1..4)")),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," x ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..="),"n ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..."),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"match")," number ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token macro property"}),"println!"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"One!"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"2")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"|")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"3")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"|")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"5")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"|")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"7")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"|")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"11")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token macro property"}),"println!"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"This is a prime"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"13"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..="),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"19")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token macro property"}),"println!"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"A teen"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    _ ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"=>")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token macro property"}),"println!"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token string"}),'"Ain\'t special"'),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("h2",null,"Ownership"),Object(s.b)("p",null,"Unique features to enforce memory allocation awareness and foster good habits. Rust want to be as powerful as c/c++ to take advantage of different memory models!"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"scope c/c++ similar RAII"),Object(s.b)("li",{parentName:"ul"},'str expression e.g. "hell,world" -> c style static/global; str -> c style string in stack; String -> c++ std::string in heap'),Object(s.b)("li",{parentName:"ul"},"all primitives on stack follow the similar pattern because they have Copy trait. When you do assignment Rust will never automatically create ‚Äúdeep‚Äù copies. Rust choose to transfer ownership and invalidate the previous owner unless you impl Copy."),Object(s.b)("li",{parentName:"ul"},'let s = "hello" and s is &str with Copy trait so it can copy/assignment but it points to the same stack location. However, fixed len array is not reusing memory, instead it just Copy around like struct.'),Object(s.b)("li",{parentName:"ul"},"Tuple has copy if all its field has"),Object(s.b)("li",{parentName:"ul"},"mutable references have one big restriction: you can have only one mutable reference to a particular piece of data in a particular scope and we cannot borrow mutable ref if an immutable ref was created and used later; to sum up, as long as there's mutable ref, other immutable ref shouldn't exist!!!"),Object(s.b)("li",{parentName:"ul"},"let slice = &s","[0..5]"," , &s","[..5]"," or &","[2..]"," to refer to chunk of bytes")),Object(s.b)("h2",null,"Struct & Enum"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"let user2 = User { email, ..user };"),Object(s.b)("li",{parentName:"ul"},"reference field will be checked to force you specify lifetime"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(Debug)]")," macros annotates print gen for ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"{:?}")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(PartialEq)]"),":  == (all field eq) and != gen; Eq is PartialEq with one more check (a == a) so usually is marker behind like ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(PartialEq, Eq)]"),"; HashMap<K, V",">"," requires Eq"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(PartialOrd)]"),": require PartialEq implemented, partial_cmp -> Option<Ordering",">"," (None, Less, Equal, Greater)"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(Clone, Copy)]"),": clone requires all implement clone, copy is fastly shallow copy on stack with (copy requires clone)"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(Hash)]"),": hash get hash value"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"[#derive(Default)]"),": default make default values required by ..._or_default functions"),Object(s.b)("li",{parentName:"ul"},"enum Option<T",">"," { Some(T), None } and its functions: is_none, as_ref, as_mut, unwrap(_or), map(_or), ok(_or)->Result<T, E",">"," ...")),Object(s.b)("h2",null,"Mod"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"mod == namespace"),Object(s.b)("li",{parentName:"ul"},"pub == public or export"),Object(s.b)("li",{parentName:"ul"},"wildcard '*' and 'as'")),Object(s.b)("h2",null,"Collections"),Object(s.b)("h3",null,"Vec"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"std::vec::Vec"),Object(s.b)("li",{parentName:"ul"},"let v:Vec<i32",">"," = Vec::new(); or vec","![1, 2, 3]"," vs arrays let a:","[u8;5]"," = ","[1;5]",";"),Object(s.b)("li",{parentName:"ul"},"immutable borrow will fail the mutable borrow"),Object(s.b)("li",{parentName:"ul"},"fixed len: ","[i32;3]"," vs slices: &","[usize]"," vs vec: Vec<i32",">",", use slice as function parameters is recommended"),Object(s.b)("li",{parentName:"ul"},"for x in v.iter() or &v"),Object(s.b)("li",{parentName:"ul"},"common methods: len, is",Object(s.b)("em",{parentName:"li"},"empty, push/pop, append/split_off, dedup, clear, reserve/with_capacity, insert/remove, resize, splice, as"),"((mut_)slice/ptr), iter/&, get/[]"),Object(s.b)("li",{parentName:"ul"},"Deref methods for binary search etc. like c++ container common")),Object(s.b)("h3",null,"String"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"std::string::String"),Object(s.b)("li",{parentName:"ul"},"String vs str and Rust also has the real things: CString vs CStr"),Object(s.b)("li",{parentName:"ul"},'String::from("...") vs "...".to_string'),Object(s.b)("li",{parentName:"ul"},"Since the interexchange of 2 types usually happens, it's recommended to make function arguments as slices: &str"),Object(s.b)("li",{parentName:"ul"},"common methods for both String/str: len, push(",Object(s.b)("em",{parentName:"li"},"str)/pop, from(_utf8_lossy), insert(_str)/remove, clear, is_empty, split(_off), as(into)"),"(bytes/str), replace_range, find")),Object(s.b)("h3",null,"HashMap"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"std::collections::HashMap"),Object(s.b)("li",{parentName:"ul"},"Key Eq trait is requied"),Object(s.b)("li",{parentName:"ul"},"commond methods: insert/remove, get, entry(.or_insert), contains_key"),Object(s.b)("li",{parentName:"ul"},"default rust hash is encryptically secure for some attack but slow, to perform better bring your own hasher")),Object(s.b)("h3",null,"BTreeMap"),Object(s.b)("h2",null,"Error Handling"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"enum")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token type-definition class-name"}),"Result"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"T"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),",")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"E"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Ok"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"T"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Err"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"E"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),","),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"panic!, Result (unwrap/expect to panic) or ? (return/propagate error Result)")),Object(s.b)("h2",null,"Generic & Lifetime"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"pub")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"trait")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Summary")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"pub")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"fn")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-definition function"}),"summarize"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"self"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"->")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"String")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..."),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"impl")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Summary")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Book")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..."),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"impl")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Summary")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Article")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..."),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"equivalent to C++ template"),Object(s.b)("li",{parentName:"ul"},"trait == interface"),Object(s.b)("li",{parentName:"ul"},"fn notify(& impl Summary) == fn notify<T:Summary",">","(&T)"),Object(s.b)("li",{parentName:"ul"},"use + for multiple traits: fn notify(& impl Summary + Display)"),Object(s.b)("li",{parentName:"ul"},"use where to clearer signature"),Object(s.b)("li",{parentName:"ul"},"impl<T:SomeTrait",">"," Summary<T",">"," for T to define generic impl (blanked impl)"),Object(s.b)("li",{parentName:"ul"},"lifetime will be smaller of your variables associated e.g. ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"'a")),Object(s.b)("li",{parentName:"ul"},"elision rule: 1. each param has lifetime var 2. if one param return is the same 3. else if one param is &self/&mut self, &self lifetime is assigned else compiler fails to figure out and error!"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"'static")," life time is global/static")),Object(s.b)("h2",null,"Hands On!"),Object(s.b)("h2",null),Object(s.b)("h1",null,"Rust In Action (MEAP) (‚≠ê‚≠ê‚≠ê‚≠ê) ",Object(s.b)("a",Object.assign({parentName:"h1"},{href:"https://rust-lang-nursery.github.io/rust-cookbook/intro.html"}),"Rust Cook Book")," ",Object(s.b)("a",Object.assign({parentName:"h1"},{href:"https://doc.rust-lang.org/nomicon/index.html"}),"Rust Dark Art")),Object(s.b)("p",null,"Expected to find some lang system level explanation (e.g. virtual function table, garbage collector mechanism) instead of common lang features. Also multi-threading is great topic if it can cover. "),Object(s.b)("h2",null,"Intros"),Object(s.b)("h3",null,"Number Type"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Conversion is explicit through ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"as")),Object(s.b)("li",{parentName:"ul"},"Each type has its method like ",Object(s.b)("em",{parentName:"li"},"24.5_f32"),".",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"round()")," is method to round ",Object(s.b)("em",{parentName:"li"},"24.5_f32")," to ",Object(s.b)("em",{parentName:"li"},"25"),"."),Object(s.b)("li",{parentName:"ul"},'Format type "{:b}{:o}{:x}". '),Object(s.b)("li",{parentName:"ul"},"Float comparison is tolerate with e.g. ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"f32::EPSILON"),"."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"num")," crate extend primitive types to support e.g. complex, big integer/infinite float, fixed point currency decimal")),Object(s.b)("h3",null,"Iteration"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"for x in 0..10 "),Object(s.b)("li",{parentName:"ul"},"for x in ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"collection.iter()")," or ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"&collection")),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"iter_mut")," is mutable while ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"into_iter")," is value typed")),Object(s.b)("h3",null,"Flow"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"loop { if ... break }"),Object(s.b)("li",{parentName:"ul"},"match ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"0..=40")," is range of ","[0, 40]",", ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"|")," is or and ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"_")," is otherwise")),Object(s.b)("h3",null,"Function Signature"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"fn lifetime<'a, 'b>(x: &'a i32, y: &' i32) -> i32"),Object(s.b)("li",{parentName:"ul"},"fn add<T: std::ops::Add<Output=T> + std::ops::Multiply >"),Object(s.b)("li",{parentName:"ul"},"str -> c style stack/static ; String -> std::string heap and I ",Object(s.b)("em",{parentName:"li"},"guess")," primitive follow the same pattern vs Box."),Object(s.b)("li",{parentName:"ul"},"Arrays -> c style Slice -> new/malloc Vector -> c++ vec"),Object(s.b)("li",{parentName:"ul"},"#","![allow(unused_variables)]"," #","![allow(dead_code)]"," and unimplemnted! macro")),Object(s.b)("h3",null,"Struct"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"tuple Example(i32,...) is anonymous struct and reference element by .0 .1 .2 ..."),Object(s.b)("li",{parentName:"ul"},"name: String == ","[u8; name.size ]"," and data: Vec<u8",">"," == ","[u8; data.size]"," and they are most possibly on heap"),Object(s.b)("li",{parentName:"ul"},"impl, self and return (default last one, note ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),";"),") ")),Object(s.b)("h3",null,"Implementation"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"unsafe block is used when check global in system level programming, and static globals are all capital"),Object(s.b)("li",{parentName:"ul"},"panic! to throw exception"),Object(s.b)("li",{parentName:"ul"},"const vs let: const is like c/c++ ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"const")," during compile time and define fixed array while ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"let")," is runtime. ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"let")," is more of shared reference and it can be shadowed and convert to mut."),Object(s.b)("li",{parentName:"ul"},"Result<T, String> -> Ok(T) or Err(String) and ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"unwrap()")),Object(s.b)("li",{parentName:"ul"},"trait ... fn(self &Self ...) and impl SomeTrait for YourClass. It's like interface and implements/extend"),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"#[derive(Debug)]")," is for auto trait generation and format as {:?}"),Object(s.b)("li",{parentName:"ul"},"pub as export, pub module can be pub(crate) in crate, pub(super) to parent pub(in path) to modules in path"),Object(s.b)("li",{parentName:"ul"},"//! for modules/files /// for next code and ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"rustdoc")," to render the documents")),Object(s.b)("h2",null,"Lifetime, Ownership & Borrowing"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Copy trait is not implement unless primitive type. Assigning value leads ownership transfer. Not convenient but this avoid c/c++ copy/move constructor assumption issue (make things clear)."),Object(s.b)("li",{parentName:"ul"},"Drop is extra customized destructor traits that run with default one in case you want to do some extras"),Object(s.b)("li",{parentName:"ul"},"Ownership moves through: assignment including function arguments/returns. Tracing these ownership relief garbage collecting burden."),Object(s.b)("li",{parentName:"ul"},"Copy vs Clone: Copy happens at assignment or ownership transfer, all primitive type implements this; Clone is clone trait. You can use compiler to generate bit by bit (shallow) copy/clone #","[derive(Debug,Clone,Copy)]","."),Object(s.b)("li",{parentName:"ul"},"use std::rc::Rc is std::shared_ptr, Rc is immutable, however RefCell<T",">"," can wrap it to make struct internal mutable via ",Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),".borrow_mut()"),". Note these 2 are ",Object(s.b)("strong",{parentName:"li"},"not")," threadsafe, while Arc<Mutex<T",">",">"," is."),Object(s.b)("li",{parentName:"ul"},"raw memory interprets: unsafe { std::mem::transmute(a) };")),Object(s.b)("h1",null,"Integer"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Integer overflow, big/little endian, f32 ieee format and Q7 format (new to me). In these case, try to use function like checked",Object(s.b)("em",{parentName:"li"},"*(add) or overflow"),"*"),Object(s.b)("li",{parentName:"ul"},"bit op: 1u32 << 1"),Object(s.b)("li",{parentName:"ul"},"mod similar to namespace, mod.rs is for folder."),Object(s.b)("li",{parentName:"ul"},Object(s.b)("code",Object.assign({parentName:"li"},{className:"language-text"}),"#[cfg(test)]")," and cargo test")),Object(s.b)("h1",null,"Pointer vs Reference"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"Reference is safe; pointer is unsafe: raw pointer it can be null and no check; smart pointer "),Object(s.b)("li",{parentName:"ul"},"Box like java is used to box primitive types. Make them of struct flavor"),Object(s.b)("li",{parentName:"ul"},"Raw pointer: let ptr = &obj as ",Object(s.b)("em",{parentName:"li"}," const u8 as "),"mut u8 // &reference cannot be cast directly to mut üôÇ"),Object(s.b)("li",{parentName:"ul"},"Cow copy on write smart pointer, if read, no copy!"),Object(s.b)("li",{parentName:"ul"},"all pointers listed (note not applicable means not directly used) as below:")),Object(s.b)("div",{id:"smart_pointers"}),Object(s.b)("table",null,Object(s.b)("thead",{parentName:"table"},Object(s.b)("tr",{parentName:"thead"},Object(s.b)("th",Object.assign({parentName:"tr"},{align:"left"}),"Name"),Object(s.b)("th",Object.assign({parentName:"tr"},{align:"center"}),"Usage"),Object(s.b)("th",Object.assign({parentName:"tr"},{align:"right"}),"Pros"),Object(s.b)("th",Object.assign({parentName:"tr"},{align:"right"}),"Cons"))),Object(s.b)("tbody",{parentName:"table"},Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Raw Pointer"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"&obj as ",Object(s.b)("em",{parentName:"td"}," const u8 as ")," mut u8"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"speed/acess other system"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"unsafe and not smartüôÇ")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Box<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Box<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"== c++ unique_ptr"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size overhead")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Rc<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Rc<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"== c++ shared_ptr"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/runtime cost/thread unsafe")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Arc<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"ARc<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"thread safe Rc == c++ atomic_*"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"same as Rc")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Weak<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"rc::Weak::new(..) arc::Weak::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"==c++ weak_ptr/thread safe"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Cell<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Cell<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"unmutify obj"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Ref(Mut)<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Ref(Mut)<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"&(mut)'s runtime version"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"RefCell<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"RefCell<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"unmut & combine with Rc/Arc"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Cow<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Cow:from(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"avoid clone if read"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"String"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"String::from(str)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"resizable/encoding check"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Vec<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Vec<T",">","::new([])"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"resizeable"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"size/cost")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"RawVec<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"RawVec<T, A: Alloc",">","::new([])"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"resizeable/allocator"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"behind Vec & VecDeq, not applicable in code")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Unique<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Unique<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"used by String, Vec etc."),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"not applicable in code")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"Shared<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"Shared<T",">","::new(..)"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"used by Rc, Arc etc."),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"not applicable in code")),Object(s.b)("tr",{parentName:"tbody"},Object(s.b)("td",Object.assign({parentName:"tr"},{align:"left"}),"UnsafeCell<T",">"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"center"}),"?"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"unsafe"),Object(s.b)("td",Object.assign({parentName:"tr"},{align:"right"}),"not applicable in code")))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"AsRef<T",">"," and AsMut<T",">"," to support low cost similar to Borrow, need to pay attention to Borrow Cow ToOwned and AsRef!"),Object(s.b)("li",{parentName:"ul"},"Box:new, * unary and drop -> C++ new/delete"),Object(s.b)("li",{parentName:"ul"},"Trace heap: timeout 20 ltrace -T -o trace.txt -e -*+malloc+free+realloc ./target/debug/particles"),Object(s.b)("li",{parentName:"ul"},"Rust can access low level system api like c/c++, e.g. winapi, kernel32")),Object(s.b)("h2",null,"File & Storage"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"serde -> serialize/deserialize -> support json, cbor, bincode, with annotation e.g. #","[derive(Serialize, Deserialize)]"),Object(s.b)("li",{parentName:"ul"},'let a = br#"...."#; //multiline string format as bytes'),Object(s.b)("li",{parentName:"ul"},'unwrap->expect("error message")'),Object(s.b)("li",{parentName:"ul"},"OpenOptions::new().read(true).write(true).create(true)... Java flavor builder for options"),Object(s.b)("li",{parentName:"ul"},"Path and PathBuf"),Object(s.b)("li",{parentName:"ul"},"#",'[cfg(target_os="linux")]'," -> ifdef ",Object(s.b)("strong",{parentName:"li"},"LINUX")),Object(s.b)("li",{parentName:"ul"},"? for std Result handling, Ok-> unwrap Err-> return"),Object(s.b)("li",{parentName:"ul"},"Riak and Bitcask db (guarantee never lost data)")),Object(s.b)("div",{className:"gatsby-highlight","data-language":"text"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-text"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-text"}),"Fixed-width header      Variable-length body\n-----------------    --------------------------\n/                \\ /                            \\\n+=====+=====+=====+====== - - +============= - - +\n| u32 | u32 | u32 | [u8]      | [u8]             |\n+=====+=====+=====+====== - - +============= - - +\nchksum klen  vlen   key         value"))),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"HashMap .insert []==.index() .get()"),Object(s.b)("li",{parentName:"ul"},'json!("{..json..format}") from serde_json')),Object(s.b)("h2",null,"Networking"),Object(s.b)("ul",null,Object(s.b)("li",{parentName:"ul"},"reqwest::get(url)->Result<(), Box<dyn std::error::Error",">",">"),Object(s.b)("li",{parentName:"ul"},"traits/abstract")),Object(s.b)("h3",null,"impl to attach fn"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"impl")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Abstract")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"fn")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..."),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))),Object(s.b)("h3",null,"type conversion"),Object(s.b)("p",null,"Require impl the traits if you convert e.g. &str -> String"),Object(s.b)("div",{className:"gatsby-highlight","data-language":"rust"},Object(s.b)("pre",Object.assign({parentName:"div"},{className:"language-rust"}),Object(s.b)("code",Object.assign({parentName:"pre"},{className:"language-rust"}),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"impl")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"From"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"<"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),">")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"for")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Number")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"//TryFrom is the fallible equivalent"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"fn")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token function-definition function"}),"from"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"("),"s",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"i32"),Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),")")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"->")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token keyword"}),"Self")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token class-name"}),"Number")," ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"{")," value",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),":")," s ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(s.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"}")))))}o.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-posts-2020-12-21-rust-reading-notes-mdx-fecea07dfc47ff735943.js.map