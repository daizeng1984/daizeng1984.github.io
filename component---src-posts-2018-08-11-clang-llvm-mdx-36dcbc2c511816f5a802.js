(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"8hLB":function(e,a,n){"use strict";n("E5k/");var t=n("q1tI"),s=n.n(t),c=(n("Wbzz"),n("Bl7J"));a.a=function(e){return s.a.createElement(c.a,Object.assign({},e,{icon:"post"}))}},yNNz:function(e,a,n){"use strict";n.r(a),n.d(a,"_frontmatter",(function(){return c})),n.d(a,"default",(function(){return p}));n("rzGZ"),n("Dq+y"),n("8npG"),n("Ggvi"),n("E5k/"),n("q1tI");var t=n("7ljp"),s=n("8hLB");var c={},b={_frontmatter:c},o=s.a;function p(e){var a=e.components,n=function(e,a){if(null==e)return{};var n,t,s={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],a.indexOf(n)>=0||(s[n]=e[n]);return s}(e,["components"]);return Object(t.b)(o,Object.assign({},b,n,{components:a,mdxType:"MDXLayout"}),Object(t.b)("p",null,"gcc is deprecated now. Use clang!"),Object(t.b)("h1",null,"GCC vs Clang++"),Object(t.b)("p",null,"Short story: GCC is slow, old (consider compiling a C++17 package in ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux"}),"RHEL"),"), GPL, not hackable;\nwhile ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://clang.llvm.org/"}),"Clang")," changes everyting above plus having its family support from ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://llvm.org/"}),"LLVM"),".\nIf you don't care about programming at operating system level and don't need to maintain legacy code that solely relies on GCC, this is definitely a benefitial move."),Object(t.b)("h1",null,"One Button"),Object(t.b)("p",null,"Chandler Carruth's ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://youtu.be/uZI_Qla4pNA"}),'"LLVM: A Modern, Open C++ Toolchain"')," is a very nice talk to know more about modern toolchain for C++. What I found inspiring is how ",Object(t.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"modern")," clang becomes. Below is a script drawn from the talk to download everything and build your clang from scratch."),Object(t.b)("div",{className:"gatsby-highlight","data-language":"bash"},Object(t.b)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(t.b)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone git://github.com/ninja-build/ninja.git\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," ninja\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," checkout release\n./configure.py --bootstrap\n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..")," \n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/llvm.git ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token comment"}),"# Don't clone everything"),"\n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," llvm/tools \n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/clang.git\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/lld.git\n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," clang/tools\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/clang-tools-extra.git extra\n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/projects\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/libcxx.git\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/libcxxabi.git\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"git")," clone --depth",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token number"}),"1")," https://llvm.org/git/compiler-rt.git \n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"mkdir")," build ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&&")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"cd")," build\ncmake ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),"..")," -GNinja  -DCMAKE_MAKE_PROGRAM",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token variable"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),"$("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token builtin class-name"}),"pwd"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),")")),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/ninja/ninja -DCMAKE_BUILD_TYPE",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"Release -DCMAKE_INSTALL_PREFIX",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token environment constant"}),"$HOME"),"/.local/ -DCOMPILER_RT_INCLUDE_TESTS",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"OFF -DLLVM_ENABLE_ASSERTIONS",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),"OFF\n\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token variable"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),"$("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token builtin class-name"}),"pwd"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),")")),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/ninja/ninja ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"&&")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token variable"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),"$("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token builtin class-name"}),"pwd"),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),")")),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token punctuation"}),".."),"/ninja/ninja ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token function"}),"install")))),Object(t.b)("p",null,"Finally, some finishing touch:"),Object(t.b)("div",{className:"gatsby-highlight","data-language":"bash"},Object(t.b)("pre",Object.assign({parentName:"div"},{className:"language-bash"}),Object(t.b)("code",Object.assign({parentName:"pre"},{className:"language-bash"}),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"export")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token assign-left variable"}),"CXX"),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token variable"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),"$("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"which")," clang++",Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),")")),"\n",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token builtin class-name"}),"export")," ",Object(t.b)("span",Object.assign({parentName:"code"},{className:"token assign-left variable"}),"CC"),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token operator"}),"="),Object(t.b)("span",Object.assign({parentName:"code"},{className:"token variable"}),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),"$("),Object(t.b)("span",Object.assign({parentName:"span"},{className:"token function"}),"which")," clang",Object(t.b)("span",Object.assign({parentName:"span"},{className:"token variable"}),")"))))),Object(t.b)("p",null,"I actually use this ",Object(t.b)("a",Object.assign({parentName:"p"},{href:""}),"script")," to install Clang in my local dotfiles environment."),Object(t.b)("h1",null,"Compiler at Your Finger Tip"),Object(t.b)("p",null,"Now after a few minute wait, you got the new freshly baked c++ compiler. No root permission or any painful dependency packages needed. Even though C++ seems to be the hardest language to apply ",Object(t.b)("a",Object.assign({parentName:"p"},{href:"https://buckaroo.pm/"}),"modern package management"),", I still hope C++ community will eventually come up with a ",Object(t.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"npm")," equivalent public code repo/package manager at least working for most *nix system. "),Object(t.b)("h1",null,"Side Notes"),Object(t.b)("p",null,"If you lead a Pythonful life, to install ",Object(t.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"cmake")," you can simply run ",Object(t.b)("code",Object.assign({parentName:"p"},{className:"language-text"}),"pip install cmake")," and upgrade becomes easier."))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-posts-2018-08-11-clang-llvm-mdx-36dcbc2c511816f5a802.js.map