{"version":3,"sources":["webpack:///./src/posts/2018-11-18-conda-everything.mdx","webpack:///./src/components/posts-layout.js"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent","PostPage","icon"],"mappings":"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","file":"component---src-posts-2018-11-18-conda-everything-mdx-e1387cf055978d2724a6.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/Users/zengdai/Workspace/vimwiki/Projects/Blogger/blogv3/src/components/posts-layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Conda is not just for Python.`}</p>\n    <h1>{`Conda`}</h1>\n    <p>{`Conda is a cross-platform, language-agnostic binary package manager. Shame for me ðŸ˜Ÿ, it's there for years, but only recently I've realized how awesome it is! Maybe Anaconda's daunting fat distribution scares away people like me. Anyhow, with `}<a parentName=\"p\" {...{\n        \"href\": \"https://conda.io/miniconda.html\"\n      }}>{`MiniConda`}</a>{` you can manage virtual environment of your `}<em parentName=\"p\">{`nix packages. If you works on app level development (not OS related), you can easily make almost every standard linux dev package `}<code parentName=\"em\" {...{\n          \"className\": \"language-text\"\n        }}>{`virtual`}</code>{`. This is super useful if you're not sudoer or in big tech giants (which usually has their own package mangers) but want to do something big or you don't like heavy rocket-launcher solutions (`}<a parentName=\"em\" {...{\n          \"href\": \"https://www.docker.com/\"\n        }}>{`Docker`}</a>{`/`}<a parentName=\"em\" {...{\n          \"href\": \"https://en.wikipedia.org/wiki/Virtual_machine\"\n        }}>{`VirtualMachine`}</a>{`). Actually, inside conda's \\`x86`}<em parentName=\"em\">{`64-conda`}</em></em>{`-linux-gnu/sysroot\\`, you can build your own *nix kingdom or miniverse.`}</p>\n    <p><figure parentName=\"p\" {...{\n        \"className\": \"gatsby-resp-image-figure\",\n        \"style\": {\n          \"position\": \"relative\",\n          \"display\": \"block\",\n          \"marginLeft\": \"auto\",\n          \"marginRight\": \"auto\",\n          \"width\": \"40%\",\n          \"textAlign\": \"center\",\n          \"minWidth\": \"15rem\",\n          \"backgroundColor\": \"rgb(255, 255, 255)\",\n          \"border\": \"1px solid rgb(222, 226, 230)\",\n          \"maxWidth\": \"600px\"\n        }\n      }}>{`\n    `}<span parentName=\"figure\" {...{\n          \"className\": \"gatsby-resp-image-wrapper\",\n          \"style\": {\n            \"position\": \"relative\",\n            \"display\": \"block\",\n            \"marginLeft\": \"auto\",\n            \"marginRight\": \"auto\",\n            \"maxWidth\": \"600px\"\n          }\n        }}>{`\n      `}<a parentName=\"span\" {...{\n            \"className\": \"gatsby-resp-image-link\",\n            \"href\": \"/static/106733e904a7d41252442d899c5c2e97/29114/miniverse.png\",\n            \"style\": {\n              \"display\": \"block\"\n            },\n            \"target\": \"_blank\",\n            \"rel\": [\"noopener\"]\n          }}>{`\n    `}<span parentName=\"a\" {...{\n              \"className\": \"gatsby-resp-image-background-image\",\n              \"style\": {\n                \"paddingBottom\": \"55.99999999999999%\",\n                \"position\": \"relative\",\n                \"bottom\": \"0\",\n                \"left\": \"0\",\n                \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACqklEQVQozwGfAmD9AKWbXIZ4Rop/SpGHVpKETHJiOW1hRnlrTIFxR3xrOIuSg66/woiGa46CSZDMfF3glneXYa6cXJ6VWH1vQAD79aDXyIeoyJCL1JLP1pO/uHyIgWGQg11+e1N2dVKnt7PMy8zJyafb1ol90otXyoWy5JD66Zrh2pCwn2UAuKx1w7OCfryNSbZdm8+Lv8eXeXVboJxtmZ5mcFkmhntmv7Sq3NST6dyTk7d2e75tw8Vw18iI9u+huqptAOTcj8S3iJLSlVaxY5rKhc3BgINwTKWVYJOFTV9GGpeRg7zS0Onfne3elLKzbmqsati+YtvLgvDplrmqaADHvGizoWKClFpDrWBfmleij1fcw7DUvKVnYUBUSSnHxr3D4OrCtYPLvWjNuGO8xWfGsFfLv2XNv2ajk1cAh3pViIFSWndScHpddHNUkpJn88quzq2QZFUwXUgivsvJgcOtmqpmn5thfphYybtlYZdej5Vbm45YhnlKAMSwg5GRcChTSk9uXExqW4mPZvftf7q4dmuGXkeVelOsl0KqhV2sf2OZdHmbaqi3dWOlX3qbZsO1fsO2fwCSg09gaEg0TkpZYU9IYExobEvx6XuUp4ZakoJE0q1k4rp548BM2LVEz6xNh3edq5JWnW6crHC0p2quoWkAg3JEaW1IWW5eXWpZVWhVd3NZybdxZnJdQYuDSNixY+nAb+rCTuK3S9qxO3pwa3BVaopatKl0hHtNU0ooALOkW46GVJeNbpqPb5SIap2ScoqBZpqYe1OiilOch2KolmmyoGermVWch1ighKKWdIuGbJuUdqKXdJiNbADZzna8r3/KvpPPxJbLwZbNw5TNw5XRxJbFu5HGuY/LvJPIuZPJuZLHuY/HvZPUyJrUyZrTyZnUyZrQxpl37nQ9ai4ySQAAAABJRU5ErkJggg==')\",\n                \"backgroundSize\": \"cover\",\n                \"display\": \"block\"\n              }\n            }}></span>{`\n  `}<img parentName=\"a\" {...{\n              \"className\": \"gatsby-resp-image-image\",\n              \"alt\": \"A miniverse, from Rick and Morty\",\n              \"title\": \"A miniverse, from Rick and Morty\",\n              \"src\": \"/static/106733e904a7d41252442d899c5c2e97/0a47e/miniverse.png\",\n              \"srcSet\": [\"/static/106733e904a7d41252442d899c5c2e97/8a4e8/miniverse.png 150w\", \"/static/106733e904a7d41252442d899c5c2e97/5a46d/miniverse.png 300w\", \"/static/106733e904a7d41252442d899c5c2e97/0a47e/miniverse.png 600w\", \"/static/106733e904a7d41252442d899c5c2e97/1cfc2/miniverse.png 900w\", \"/static/106733e904a7d41252442d899c5c2e97/c1b63/miniverse.png 1200w\", \"/static/106733e904a7d41252442d899c5c2e97/29114/miniverse.png 1920w\"],\n              \"sizes\": \"(max-width: 600px) 100vw, 600px\",\n              \"style\": {\n                \"width\": \"100%\",\n                \"height\": \"100%\",\n                \"margin\": \"0\",\n                \"verticalAlign\": \"middle\",\n                \"position\": \"absolute\",\n                \"top\": \"0\",\n                \"left\": \"0\"\n              },\n              \"loading\": \"lazy\"\n            }}></img>{`\n  `}</a>{`\n    `}</span>{`\n    `}<figcaption parentName=\"figure\" {...{\n          \"className\": \"gatsby-resp-image-figcaption\"\n        }}>{`A miniverse, from Rick and Morty`}</figcaption>{`\n  `}</figure></p>\n    <h1>{`Use Conda for Everything`}</h1>\n    <p>{`I've found a lot packages in anaconda shopping mall: `}<strong parentName=\"p\">{`zsh, clang, cmake, libtool, autoconfig, nodejs, ruby, openjdk`}</strong>{`... all linux toolchains and packages you could image. Vendor like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda-forge`}</code>{` makes a lot of recipes, got to check it out. Next time when you want to `}<em parentName=\"p\">{`brew/apt/yum install`}</em>{`, you should first check if you can do it in conda elegantly. The good things is that you don't need to messing around with folders like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`/usr/bin`}</code>{` etc. and you can easily revert to your previous install revisions. Excited by this finding, I've migrated all my old install `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/daizeng1984/dotfiles/blob/experimental/installConda.sh\"\n      }}>{`scripts`}</a>{` just to use conda so that my environment is more independent.`}</p>\n    <h1>{`What? no recent neovim?`}</h1>\n    <p>{`In anaconda, I can only find python package instead of native neovim app I need. There are some native neovim build but mostly outdated. One of the greatest things about conda ecosystem is: if some package's missing, you can build it from source and then share it on Anaconda store. Everyone else benefits by saving a lot of build/release time.\nBuild conda packages is so `}<a parentName=\"p\" {...{\n        \"href\": \"http://mlg.eng.cam.ac.uk/hoffmanm/blog/2016-02-25-conda-build/\"\n      }}>{`easy`}</a>{`. Always remember `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda-forge`}</code>{` is one of the most resourceful channels. After some searching, you could write your first build `}<a parentName=\"p\" {...{\n        \"href\": \"script\"\n      }}>{`script`}</a>{` for neovim quickly. Then you just do:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"bash\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-bash\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-bash\"\n        }}>{`conda build nvim -c conda-forge`}</code></pre></div>\n    <p>{`Later install this package locally. In my case, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda install --use-local`}</code>{` doesn't work, so I used this one `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda install -c file://\\${CONDA_PREFIX}/conda-bld/<PACKAGENAME>`}</code>{`. When build is working, you could upload it for example:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"bash\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-bash\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-bash\"\n        }}>{`anaconda login\nanaconda upload `}<span parentName=\"code\" {...{\n            \"className\": \"token variable\"\n          }}>{`\\${CONDA_PREFIX}`}</span>{`/conda-bld/linux-64/nvim-0.3.1-0.tar.bz2 `}</code></pre></div>\n    <p>{`Of course, you can do better using `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Continuous_integration\"\n      }}>{`CI`}</a>{` like `}<a parentName=\"p\" {...{\n        \"href\": \"https://travis-ci.org/\"\n      }}>{`Travis`}</a>{` to automate releasing of all platforms. You can also push your recipe to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda-forge`}</code>{` for publish like `}<a parentName=\"p\" {...{\n        \"href\": \"https://gist.github.com/zshaheen/fe76d1507839ed6fbfbccef6b9c13ed9\"\n      }}>{`here`}</a>{` or `}<a parentName=\"p\" {...{\n        \"href\": \"https://gist.github.com/yoavram/05a3c04ddcf317a517d5\"\n      }}>{`here`}</a></p>\n    <p>{`So now everyone who wants neovim in conda could do this in Linux/OSX, ðŸ™Œ: `}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"bash\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-bash\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-bash\"\n        }}>{`conda `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`install`}</span>{` -y -c daizeng1984 nvim`}</code></pre></div>\n    <h1>{`Revisit My Previous Projects`}</h1>\n    <p>{`If you worked with Python before, you must remember the nightmare with Python's native dependencies e.g. `}<strong parentName=\"p\">{`BLAS, OpenLdap, Cyrus-Sasl`}</strong>{` etc.. One of my python neovim plugin also has hard-to-get dependency. This sucks and frustrates a lot since we are advertised Python is very cross-platformy. Now with conda, you have more confidence to install all dependencies using merely `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda install`}</code>{`. There are still some Python packages (pip) or outlaws that don't respect conda, and blindly complains about e.g. missing lib's headers. In this case, we need keep the build folder (--no-clean), add lib and include locations in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`setup.cfg`}</code>{` and reinstall. `}</p>\n    <p>{`For example, my neovim plugin `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/daizeng1984/vim-snip-and-paste\"\n      }}>{`Snip-n-Paste`}</a>{`, requires `}<a parentName=\"p\" {...{\n        \"href\": \"https://pygobject.readthedocs.io/en/latest/getting_started.html\"\n      }}>{`pygobject`}</a>{` which usually took quite some time to get it right, but now it's simply: `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda install -c pkgw-forge -c conda-forge gtk3 pygobject`}</code>{`. Another example is installing the servers for LanguageClient e.g. cquery.`}</p>\n    <h1>{`Cons?`}</h1>\n    <p>{`You got me, not perfect at everything, just for open *nix packages. You cannot install OS dependent app e.g. mac store app etc.. There are also some boundaries if you have some outlaw (mostly native code related) apps, e.g. `}<a parentName=\"p\" {...{\n        \"href\": \"https://matplotlib.org/faq/osx_framework.html\"\n      }}>{`maplot`}</a>{`. In these case, you're still limited to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`brew install`}</code>{`, but maybe think about: do you really need these not very portable `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`bad guys`}</code>{`?`}</p>\n    <p>{`conda might as well have issues with versions consistency. You need to choose the reliable channel. But again, when messed up, you can always revert back. To minimize these issues, I'd stick to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`conda-forge`}</code>{` channel for all dependencies and when necessary, build my own. Therefore, for my conda experience so far, so good.`}</p>\n    <p>{`Of course, conda is not alone. For *nix environment, `}<a parentName=\"p\" {...{\n        \"href\": \"https://nixos.org/nix/\"\n      }}>{`Nix`}</a>{` as another package manager claims to be as cool as it and it seems to gain a lot of attention recently. However, no matter your choice, it's good to make your development environment as independent as possible.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      ","import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from './layout.js'\n\nconst PostPage = (props) => (\n    <Layout {...props} icon='post' />\n)\n\nexport default PostPage\n"],"sourceRoot":""}