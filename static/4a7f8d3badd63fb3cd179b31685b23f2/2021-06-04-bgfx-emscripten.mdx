---
category: post
title:  "Bgfx on Web"
date:   "2021-06-04"
size: 4
visible: 1
---
bgfx support many platform, let's see if we can embed it on this post...

# Bgfx + Emscripten

* Bgfx is a powerful rendering API help you to deal with lots of cross platform/low-level graphics API stuff!

* Emscripten allows you code in familiar native language like C++ and compile it to WebAssembly that runs in browser. There are some limitation of course but good thing about wasm is: your app can be accessed by anyone with modern browser (webgl).

* WebGL & mobile graphics is the relative low end, if you manage to run on these platform, it also prove that it can run anywhere else.

[Here](https://github.com/daizeng1984/bgfx.emscripten)'s code to compile a simple example from bgfx.

# Tips (or Âùë)
1. Using nix and direnv saved a lot of rampup works, if you are interested. Check out my previous [post](./2020-12-10-nix-power-2).
2. BGFX can build wasm but failed to compile some examples, you need to compile wasm without example like [this](https://github.com/daizeng1984/bgfx.emscripten/blob/master/Makefile#L76)
3. Emscripten provides virtual file system but you need to specify the path in configuration and use @: `path@virtualpath`
4. To use emcc with webgl or glfw you need to treat specially instead of compile yourself. A bunch of [flags](https://github.com/daizeng1984/bgfx.emscripten/blob/master/Makefile#L29) I have to add to make things work.
5. shader and assets build


<div style="
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 51%;">
<iframe width="100%" style="
  position: absolute;
  width: 100%;
  height: 100%;
  left: 0; top: 0;
" src="https://daizeng1984.bitbucket.io/assets/wasm/hdr/main.html" />
</div>
