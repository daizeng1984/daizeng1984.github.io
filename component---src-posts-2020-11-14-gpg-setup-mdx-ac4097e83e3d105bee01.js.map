{"version":3,"sources":["webpack:///./src/components/posts-layout.js","webpack:///./src/posts/2020-11-14-gpg-setup.mdx"],"names":["PostPage","props","icon","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-posts-2020-11-14-gpg-setup-mdx-ac4097e83e3d105bee01.js","sourcesContent":["import React from \"react\"\nimport { Link } from \"gatsby\"\n\nimport Layout from './layout.js'\n\nconst PostPage = (props) => (\n    <Layout {...props} icon='post' />\n)\n\nexport default PostPage\n","import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/zdai/Workspace/vimwiki/Projects/Blogger/blogv3/src/components/posts-layout.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`Just to help explain a bit...`}</p>\n    <h1>{`Nix & Home Manager`}</h1>\n    <p>{`Why Nix? please visit my `}<a parentName=\"p\" {...{\n        \"href\": \"./2020-10-24-nix-power\"\n      }}>{`previous post`}</a>{`. `}</p>\n    <p>{`Home manager's default programs for darwin is limited and nix-darwin is intrusive for me. However, gpg's setup is not really hard nowaday (no more backend/daemon managing stuff). It's all about setting up `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gpg*.conf`}</code>{` files in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`.gnupg`}</code>{` once you have `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gnupg`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`pinentry`}</code>{` from nixpkgs.`}</p>\n    <p>{`In home-manager, if you do:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"nix\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-nix\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-nix\"\n        }}>{`programs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`gpg `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    enable `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code></pre></div>\n    <p>{`this will generate `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gpg.conf`}</code>{` file, while you do:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"nix\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-nix\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-nix\"\n        }}>{`services`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`gpg`}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`-`}</span>{`agent `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    enable `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code></pre></div>\n    <p>{`It generates the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gpg-agent.conf`}</code>{`. But this services bundles with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`systemd`}</code>{` for Linux and it fails on Mac (on Mac `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`launchd`}</code>{` should be used). `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gpg-agent`}</code>{` will be started automatically when you make gpg calls so no need to manage it as service. Therefore, one workaround, which I'm showing now, is to directly grab the part we need in this `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/nix-community/home-manager/blob/master/modules/services/gpg-agent.nix\"\n      }}>{`service nix file`}</a>{`. `}</p>\n    <p>{`So setup for `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`curses`}</code>{` ends up like this:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"nix\"\n    }}><pre parentName=\"div\" {...{\n        \"className\": \"language-nix\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-nix\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`let`}</span>{`\n  pinentryFlavor `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"curses\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`in`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`\n  home`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`file`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\".gnupg/gpg-agent.conf\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`text `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` lib`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`concatStringsSep `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"\\\\n\"`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"no-grab\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`++`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`# more options`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`++`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"pinentry-program `}<span parentName=\"span\" {...{\n              \"className\": \"token interpolation\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token antiquotation variable\"\n              }}>{`$`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`pkgs`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`.`}</span>{`pinentry`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`.`}</span><span parentName=\"span\" {...{\n                \"className\": \"token antiquotation variable\"\n              }}>{`$`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`pinentryFlavor`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span></span>{`}/bin/pinentry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code></pre></div>\n    <h1>{`Troubleshooting Guide`}</h1>\n    <ul>\n      <li parentName=\"ul\">{`You might want to trash/rename `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`.gnupg`}</code>{` folder for a fresh start.`}</li>\n      <li parentName=\"ul\">{`You might want to check if process `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`gpg-agent`}</code>{` is running.`}</li>\n      <li parentName=\"ul\">{`You might want to check keys with `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`gpg --list-secret-keys`}</code>{`.`}</li>\n      <li parentName=\"ul\">{`For neovim, `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`curses`}</code>{` would not work. You might want to use `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`pkgs.pinentry-mac`}</code>{` as pinentry or other alternatives such as gtk/qt for linux.`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}